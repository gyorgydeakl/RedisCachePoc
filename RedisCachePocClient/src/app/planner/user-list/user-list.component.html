<section class="p-4 lg:p-8">
  <!-- Toolbar -->
  <header class="mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
    <h1 class="text-3xl font-semibold tracking-tight">ğŸ‘¤ Users</h1>

    <div class="flex justify-end">
      <button pButton text type="button" class="p-button-sm" (click)="users.reload()">
        <i class="pi pi-refresh" pButtonIcon></i>
      </button>

      <button pButton text type="button" class="p-button-sm p-button-success" (click)="generateUsers()">
        <i class="pi pi-plus" pButtonIcon></i>
        <span pButtonLabel>Generate Users</span>
      </button>
    </div>

  </header>

  @if (users.isLoading()) {
    <div class="flex justify-center">
      <p-progressSpinner></p-progressSpinner>
    </div>
  } @else if (!users.hasValue()) {
    <p class="text-center text-gray-500">No users found.</p>
  } @else {
    <p-table
    [value]="users.value()"
    sortMode="multiple"
    [paginator]="true"
    [rows]="10"
    class="shadow rounded-lg"
  >
    <!-- Header row -->
    <ng-template #header>
      <tr>
        <th pSortableColumn="username">Username <p-sortIcon field="username"></p-sortIcon></th>
        <th pSortableColumn="email">Email <p-sortIcon field="email"></p-sortIcon></th>
        <th style="width:6rem">Actions</th>
      </tr>
    </ng-template>

    <!-- Body rows -->
    <ng-template #body let-user>
      <tr>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>
          <button
            pButton
            type="button"
            class="p-button-text p-button-sm"
            (click)="view(user.id)"
          >
            <i class="pi pi-eye" pButtonIcon></i>
            <span pButtonLabel>View</span>
          </button>
        </td>
      </tr>
    </ng-template>

    <!-- Empty message -->
    <ng-template #empty>
      <tr>
        <td colspan="3" class="text-center py-6 italic text-gray-500">
          No users found.
        </td>
      </tr>
    </ng-template>
  </p-table>
  }
</section>
